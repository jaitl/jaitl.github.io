<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>How AWS AI Services Can Help You Improve Your Foreign Language - Jaitl's blog</title><meta name=description content="AWS provides several Artificial Intelligence (AI) services. With AI services, you could implement some useful AI things: image and video analysis, document analysis, text to speech or speech to text translation, and so on. However, those AWS services can be used not only for enterprise applications but for your self-development applications."><meta name=author content="Jaitl"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Jaitl\u0027s blog","url":"https:\/\/jaitl.pro"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/jaitl.pro"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/jaitl.pro","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/jaitl.pro\/post\/2021\/04\/26\/aws-foreign-language\/","name":"How aws ai services can help you improve your foreign language"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Jaitl"},"headline":"How AWS AI Services Can Help You Improve Your Foreign Language","description":"AWS provides several Artificial Intelligence (AI) services. With AI services, you could implement some useful AI things: image and video analysis, document analysis, text to speech or speech to text translation, and so on. However, those AWS services can be used not only for enterprise applications but for your self-development applications.\n","inLanguage":"en","wordCount":965,"datePublished":"2021-04-26T12:12:00","dateModified":"2021-04-26T12:12:00","image":"https:\/\/jaitl.pro\/img\/jaitl-avatar.png","keywords":[""],"mainEntityOfPage":"https:\/\/jaitl.pro\/post\/2021\/04\/26\/aws-foreign-language\/","publisher":{"@type":"Organization","name":"https:\/\/jaitl.pro","logo":{"@type":"ImageObject","url":"https:\/\/jaitl.pro\/img\/jaitl-avatar.png","height":60,"width":60}}}</script><meta property="og:title" content="How AWS AI Services Can Help You Improve Your Foreign Language"><meta property="og:description" content="AWS provides several Artificial Intelligence (AI) services. With AI services, you could implement some useful AI things: image and video analysis, document analysis, text to speech or speech to text translation, and so on. However, those AWS services can be used not only for enterprise applications but for your self-development applications."><meta property="og:image" content="https://jaitl.pro/img/jaitl-avatar.png"><meta property="og:url" content="https://jaitl.pro/post/2021/04/26/aws-foreign-language/"><meta property="og:type" content="website"><meta property="og:site_name" content="Jaitl's blog"><meta name=twitter:title content="How AWS AI Services Can Help You Improve Your Foreign Language"><meta name=twitter:description content="AWS provides several Artificial Intelligence (AI) services. With AI services, you could implement some useful AI things: image and video analysis, document analysis, text to speech or speech to text …"><meta name=twitter:image content="https://jaitl.pro/img/jaitl-avatar.png"><meta name=twitter:card content="summary"><meta name=twitter:site content="@jaitl"><meta name=twitter:creator content="@jaitl"><link href=https://jaitl.pro/img/favicon.ico rel=icon type=image/x-icon><meta name=generator content="Hugo 0.83.1"><link rel=alternate href=https://jaitl.pro/index.xml type=application/rss+xml title="Jaitl's blog"><link rel=stylesheet href=https://jaitl.pro/css/katex.min.css><link rel=stylesheet href=https://jaitl.pro/fontawesome/css/all.css><link rel=stylesheet href=https://jaitl.pro/css/bootstrap.min.css><link rel=stylesheet href=https://jaitl.pro/css/main.css><link rel=stylesheet href=https://jaitl.pro/css/fonts.css><link rel=stylesheet href=https://jaitl.pro/css/syntax.css><link rel=stylesheet href=https://jaitl.pro/css/codeblock.css><link rel=stylesheet href=https://jaitl.pro/css/photoswipe.min.css><link rel=stylesheet href=https://jaitl.pro/css/photoswipe.default-skin.min.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-KBJ7QRKR1F"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-KBJ7QRKR1F',{anonymize_ip:!1})}</script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=https://jaitl.pro>Jaitl's blog</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Blog href=/>Blog</a></li><li><a title=About href=/about>About</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Jaitl's blog" href=https://jaitl.pro><img class=avatar-img src=https://jaitl.pro/img/jaitl-avatar.png alt="Jaitl's blog"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>How AWS AI Services Can Help You Improve Your Foreign Language</h1><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on April 26, 2021
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;5&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;965&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Jaitl</span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>AWS provides several Artificial Intelligence (AI) services. With AI services, you could implement some useful AI things: image and video analysis, document analysis, text to speech or speech to text translation, and so on. However, those AWS services can be used not only for enterprise applications but for your self-development applications.</p><p>We are interested in three AI services now:</p><ul><li><a href=https://aws.amazon.com/polly>Polly</a> — text to speech service. It generates audio by text.</li><li><a href=https://aws.amazon.com/transcribe>Transcribe</a> — speech to text service. It recognizes speech to text.</li><li><a href=https://aws.amazon.com/translate>Translate</a> — translate service. It translates a text from one language to another one.</li></ul><h2 id=skills>Skills</h2><p>Applying these services we are able to implement an application to improve our foreign language skills.</p><p>Let’s map AWS AI services to language skills:</p><ul><li>Audition skills — <code>Polly</code> allows generate audio by text that will help you hear how to pronounce unknown words and phrases.</li><li>Pronunciation skills — <code>Transcribe</code> allows recognize your speech to text that will help you train pronouncing new words and phrases.</li><li>Vocabulary volume — <code>Translate</code> allows translate words, phrases, or whole text from your language to a foreign language or vice versa that will help you understand unknown words and phrases.</li></ul><p>It doesn’t cover all skills but we could develop some of them this way.</p><p><em><strong>Note</strong></em>: AWS AI services have different sets of supported languages so there is a chance that one of them won’t support your language. Also, the services support a limited number of languages.</p><h2 id=demo-application>Demo application</h2><p>I wrote a demo application to show proof of this concept. The demo app located in <a href=https://github.com/jaitl/aws-lambda-telegram-lang-demo>my GitHub repository</a>.</p><p>I used Telegram Bot API as a UI for the application. However, you could choose any UI you want CLI, Web, Native OS forms, and so on.</p><p>Telegram provides several message types suitable for us:</p><ul><li>Voice message — we could download this message as an <code>OGG OPUS</code> file. AWS Transcribe service accepts <code>OGG OPUS</code> format as input for speech recognition. So we will able to send a Telegram voice message right in Transcribe service with no converting.</li><li>Audio message — we could send an MP3 file as an audio message. AWS Polly service returns an MP3 file so we will be able to send the MP3 file to Telegram with no converting too.</li></ul><p>I take advantage of these two message types for implementing two main features of the demo application:</p><ul><li>The user sends a voice message as a response he receives a text of the message.</li><li>The user sends a text message as a response he receives an audio message and translation from the text.</li></ul><h3 id=voice-message-recognition>Voice message recognition</h3><p>As I said above to recognize a voice message we call AWS Transcribe service. Transcribe service supports streaming so we stream a Telegram voice message to this one service. Transcribe Streaming requires three utility classes <a href=https://github.com/jaitl/aws-lambda-telegram-lang-demo/blob/main/src/main/kotlin/com/github/jaitl/aws/telegram/english/aws/steamming/AudioStreamPublisher.kt>AudioStreamPublisher</a>, <a href=https://github.com/jaitl/aws-lambda-telegram-lang-demo/blob/main/src/main/kotlin/com/github/jaitl/aws/telegram/english/aws/steamming/SubscriptionImpl.kt>SubscriptionImpl</a>, and <a href=https://github.com/jaitl/aws-lambda-telegram-lang-demo/blob/main/src/main/kotlin/com/github/jaitl/aws/telegram/english/aws/steamming/StreamResponseHandler.kt>StreamResponseHandler</a>. These files don’t contain business logic so won’t show their code here.</p><p>Bellow the function that accepts binary stream as input, creates a request to Transcribe Streaming and returns a recognized text.</p><div class=highlight><pre class=chroma><code class=language-kotlin data-lang=kotlin><span class=k>fun</span> <span class=nf>transcribe</span><span class=p>(</span><span class=n>inputAudio</span><span class=p>:</span> <span class=n>InputStream</span><span class=p>):</span> <span class=n>String</span> <span class=p>{</span>
    <span class=k>val</span> <span class=py>request</span> <span class=p>=</span> <span class=n>StartStreamTranscriptionRequest</span><span class=p>.</span><span class=n>builder</span><span class=p>()</span>
        <span class=p>.</span><span class=n>languageCode</span><span class=p>(</span><span class=n>LanguageCode</span><span class=p>.</span><span class=n>EN_US</span><span class=p>.</span><span class=n>toString</span><span class=p>())</span>
        <span class=p>.</span><span class=n>mediaEncoding</span><span class=p>(</span><span class=n>MediaEncoding</span><span class=p>.</span><span class=n>OGG_OPUS</span><span class=p>)</span>
        <span class=p>.</span><span class=n>mediaSampleRateHertz</span><span class=p>(</span><span class=m>48000</span><span class=p>)</span>
        <span class=p>.</span><span class=n>build</span><span class=p>()</span>

    <span class=k>val</span> <span class=py>blockingQueue</span><span class=p>:</span> <span class=n>BlockingQueue</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;</span> <span class=p>=</span> <span class=n>LinkedBlockingDeque</span><span class=p>(</span><span class=m>100</span><span class=p>)</span>

    <span class=k>val</span> <span class=py>result</span> <span class=p>=</span> <span class=n>transcribeStreamingClient</span><span class=p>.</span><span class=n>startStreamTranscription</span><span class=p>(</span>
        <span class=n>request</span><span class=p>,</span>
        <span class=n>AudioStreamPublisher</span><span class=p>(</span><span class=n>inputAudio</span><span class=p>),</span>
        <span class=n>StreamResponseHandler</span><span class=p>.</span><span class=n>createResponseHandler</span><span class=p>(</span><span class=n>blockingQueue</span><span class=p>)</span>
    <span class=p>)</span>

    <span class=n>result</span><span class=p>.</span><span class=k>get</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>blockingQueue</span><span class=p>.</span><span class=n>last</span><span class=p>()</span>
<span class=p>}</span>
</code></pre></div><p>Bellow the function that receives a Telegram voice message file as a stream, calls ours <code>transcribe</code> function with the stream, receives the recognized text of the voice message, and returns the text to the user.</p><div class=highlight><pre class=chroma><code class=language-kotlin data-lang=kotlin><span class=k>fun</span> <span class=nf>handleCommand</span><span class=p>(</span><span class=n>chatId</span><span class=p>:</span> <span class=n>Long</span><span class=p>,</span> <span class=n>fileId</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>val</span> <span class=py>fileSteam</span> <span class=p>=</span> <span class=n>telegramBot</span><span class=p>.</span><span class=n>getFileStream</span><span class=p>(</span><span class=n>fileId</span><span class=p>)</span>
    <span class=k>val</span> <span class=py>msg</span> <span class=p>=</span> <span class=n>aws</span><span class=p>.</span><span class=n>transcribe</span><span class=p>(</span><span class=n>fileSteam</span><span class=p>)</span>
    <span class=n>telegramBot</span><span class=p>.</span><span class=n>sendMessage</span><span class=p>(</span><span class=n>chatId</span><span class=p>,</span> <span class=s2>&#34;You said: </span><span class=si>$msg</span><span class=s2>&#34;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div><p>We don’t download the Telegram voice message file to our file system because we get a stream from the file and send the stream straight to Transcribe service.</p><h3 id=text-translation>Text translation</h3><p>To translate a text from one language to another one we call AWS Translate service. Bellow <code>translate</code> function that accepts a text, sends the text to the service, and returns a translated text.</p><div class=highlight><pre class=chroma><code class=language-kotlin data-lang=kotlin><span class=k>fun</span> <span class=nf>translate</span><span class=p>(</span><span class=n>text</span><span class=p>:</span> <span class=n>String</span><span class=p>):</span> <span class=n>String</span> <span class=p>{</span>
    <span class=k>val</span> <span class=py>textRequest</span> <span class=p>=</span> <span class=n>TranslateTextRequest</span><span class=p>.</span><span class=n>builder</span><span class=p>()</span>
        <span class=p>.</span><span class=n>sourceLanguageCode</span><span class=p>(</span><span class=s2>&#34;en&#34;</span><span class=p>)</span>
        <span class=p>.</span><span class=n>targetLanguageCode</span><span class=p>(</span><span class=s2>&#34;ru&#34;</span><span class=p>)</span>
        <span class=p>.</span><span class=n>text</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
        <span class=p>.</span><span class=n>build</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>translateClient</span><span class=p>.</span><span class=n>translateText</span><span class=p>(</span><span class=n>textRequest</span><span class=p>).</span><span class=n>translatedText</span><span class=p>()</span>
<span class=p>}</span>
</code></pre></div><h3 id=audio-message-generation>Audio message generation</h3><p>To generate an audio file from a text we call AWS Polly service. Bellow <code>synthesizeSpeech</code> function that accepts text as input, calls the service and, returns a byte array with a generated MP3 file.</p><div class=highlight><pre class=chroma><code class=language-kotlin data-lang=kotlin><span class=k>fun</span> <span class=nf>synthesizeSpeech</span><span class=p>(</span><span class=n>text</span><span class=p>:</span> <span class=n>String</span><span class=p>):</span> <span class=n>ByteArray</span> <span class=p>{</span>
    <span class=k>val</span> <span class=py>synthReq</span><span class=p>:</span> <span class=n>SynthesizeSpeechRequest</span> <span class=p>=</span> <span class=n>SynthesizeSpeechRequest</span><span class=p>.</span><span class=n>builder</span><span class=p>()</span>
        <span class=p>.</span><span class=n>text</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
        <span class=p>.</span><span class=n>voiceId</span><span class=p>(</span><span class=n>voice</span><span class=p>.</span><span class=n>id</span><span class=p>())</span>
        <span class=p>.</span><span class=n>outputFormat</span><span class=p>(</span><span class=n>OutputFormat</span><span class=p>.</span><span class=n>MP3</span><span class=p>)</span>
        <span class=p>.</span><span class=n>build</span><span class=p>()</span>

    <span class=k>val</span> <span class=py>synthRes</span> <span class=p>=</span> <span class=n>pollyClient</span><span class=p>.</span><span class=n>synthesizeSpeech</span><span class=p>(</span><span class=n>synthReq</span><span class=p>)</span>
    <span class=k>val</span> <span class=py>fileByteArray</span> <span class=p>=</span> <span class=n>IoUtils</span><span class=p>.</span><span class=n>toByteArray</span><span class=p>(</span><span class=n>synthRes</span><span class=p>)</span>

    <span class=n>synthRes</span><span class=p>.</span><span class=n>close</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>fileByteArray</span>
<span class=p>}</span>
</code></pre></div><p>Bellow the function that accepts a text message from Telegram, calls our <code>translate</code> function to translate the text and calls our <code>synthesizeSpeech</code> function to generate an MP3 file then sends results back to the user.</p><div class=highlight><pre class=chroma><code class=language-kotlin data-lang=kotlin><span class=k>fun</span> <span class=nf>handleCommand</span><span class=p>(</span><span class=n>chatId</span><span class=p>:</span> <span class=n>Long</span><span class=p>,</span> <span class=n>text</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>val</span> <span class=py>translatedText</span> <span class=p>=</span> <span class=n>aws</span><span class=p>.</span><span class=n>translate</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
    <span class=k>val</span> <span class=py>fileByteArray</span> <span class=p>=</span> <span class=n>aws</span><span class=p>.</span><span class=n>synthesizeSpeech</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
    <span class=k>val</span> <span class=py>fileName</span> <span class=p>=</span> <span class=n>UUID</span><span class=p>.</span><span class=n>randomUUID</span><span class=p>().</span><span class=n>toString</span><span class=p>().</span><span class=n>substring</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=m>6</span><span class=p>)</span>
    <span class=n>telegramBot</span><span class=p>.</span><span class=n>sendMessage</span><span class=p>(</span><span class=n>chatId</span><span class=p>,</span> <span class=s2>&#34;Translation: </span><span class=si>$translatedText</span><span class=s2>&#34;</span><span class=p>)</span>
    <span class=n>telegramBot</span><span class=p>.</span><span class=n>sendAudio</span><span class=p>(</span><span class=n>chatId</span><span class=p>,</span> <span class=n>fileByteArray</span><span class=p>,</span> <span class=n>title</span> <span class=p>=</span> <span class=s2>&#34;</span><span class=si>$fileName</span><span class=s2>.mp3&#34;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div><p>In this case, we also don’t use our file system because we save the MP3 file to the RAM then we send the file from the RAM straight to Telegram.</p><p>I’ve shown you significant parts of my demo project code only. Full code is located in <a href=https://github.com/jaitl/aws-lambda-telegram-lang-demo>my GitHub repository</a>. Feel free to read the code from the repository and run it.</p><h2 id=conclusion>Conclusion</h2><p>Having these three AWS AI services: Polly, Transcribe, and Translate we’ve implemented a tool that helps us to improve some of our foreign language skills. However, the concept presented in this article is the only core for further features.</p><p>Based on this core you could implement additional features, for example:</p><ul><li>saving original/translated text and audio as <a href=https://en.wikipedia.org/wiki/Flashcard>flashcards</a></li><li>exercise with a saved set of flashcards</li><li>gathering statistic about exercise results</li><li>implementing <a href=https://en.wikipedia.org/wiki/Spaced_repetition>spaced repetition</a> based on the gathered statistic</li></ul><p>And so on. What you will add to this core depends only on your requirements and imagination.</p><p>Thanks for reading. I hope this was helpful. If you have any questions, feel free to leave a response.</p><h2 id=resources>Resources</h2><ul><li><a href=https://github.com/jaitl/aws-lambda-telegram-lang-demo>Demo app repository</a></li></ul></article><ul class="pager blog-pager"><li class=previous><a href=https://jaitl.pro/post/2021/04/16/clickhouse-spring-data/ data-toggle=tooltip data-placement=top title="Working With ClickHouse From Spring Data Using MySql Driver">&larr; Previous Post</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=https://github.com/jaitl title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/jaitl title=Twitter><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted"><a href=https://jaitl.pro>Jaitl</a>
&nbsp;&bull;&nbsp;&copy;
2021
&nbsp;&bull;&nbsp;
<a href=https://jaitl.pro>Jaitl's blog</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.83.1</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://jaitl.pro/js/katex.min.js></script><script src=https://jaitl.pro/js/auto-render.min.js></script><script src=https://jaitl.pro/js/jquery.min.js></script><script src=https://jaitl.pro/js/bootstrap.min.js></script><script src=https://jaitl.pro/js/main.js></script><script>renderMathInElement(document.body)</script><script src=https://jaitl.pro/js/photoswipe.min.js></script><script src=https://jaitl.pro/js/photoswipe-ui-default.min.js></script><script src=https://jaitl.pro/js/load-photoswipe.js></script></body></html>